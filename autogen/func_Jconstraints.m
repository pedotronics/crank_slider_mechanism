function [JA]= func_Jconstraints(q)
%%%%%%  func_Jconstraints.m
%%%%  06-Sep-2014 20:04:44
%%%%
%%%% Authors(s): Pedotronics LLC
%%%%
%%%%
%%%%
%%%%
% Read model parameters
[r1,r2,e1,e2,e3,m1,m2,m3,J1,J2] = func_model_parameters;
X1 = q(1);
Y1 = q(2);
theta1 = q(3);
X2 = q(4);
Y2 = q(5);
theta2 = q(6);
X3 = q(7);
Y3 = q(8);
theta3 = q(9);
X4 = q(10);
Y4 = q(11);
theta4 = q(12);
JA = zeros(12,12);
JA(1,1)= cos(theta1);
JA(1,2)= -sin(theta1);
JA(1,3)= - Y1*cos(theta1) - X1*sin(theta1);
JA(1,4)= 0;
JA(1,5)= 0;
JA(1,6)= 0;
JA(1,7)= 0;
JA(1,8)= 0;
JA(1,9)= 0;
JA(1,10)= 0;
JA(1,11)= 0;
JA(1,12)= 0;
JA(2,1)= sin(theta1);
JA(2,2)= cos(theta1);
JA(2,3)= X1*cos(theta1) - Y1*sin(theta1);
JA(2,4)= 0;
JA(2,5)= 0;
JA(2,6)= 0;
JA(2,7)= 0;
JA(2,8)= 0;
JA(2,9)= 0;
JA(2,10)= 0;
JA(2,11)= 0;
JA(2,12)= 0;
JA(3,1)= 0;
JA(3,2)= 0;
JA(3,3)= 1;
JA(3,4)= 0;
JA(3,5)= 0;
JA(3,6)= 0;
JA(3,7)= 0;
JA(3,8)= 0;
JA(3,9)= 0;
JA(3,10)= 0;
JA(3,11)= 0;
JA(3,12)= 0;
JA(4,1)= cos(theta1);
JA(4,2)= -sin(theta1);
JA(4,3)= Y2*(cos(theta1 + theta2) + e1*sin(theta1)) - Y1*cos(theta1) - X1*sin(theta1) + (X2 - e1)*(sin(theta1 + theta2) + e1*sin(theta1));
JA(4,4)= - cos(theta1 + theta2) - e1*cos(theta1);
JA(4,5)= sin(theta1 + theta2) - e1*cos(theta1);
JA(4,6)= Y2*cos(theta1 + theta2) + sin(theta1 + theta2)*(X2 - e1);
JA(4,7)= 0;
JA(4,8)= 0;
JA(4,9)= 0;
JA(4,10)= 0;
JA(4,11)= 0;
JA(4,12)= 0;
JA(5,1)= sin(theta1);
JA(5,2)= cos(theta1);
JA(5,3)= Y2*(sin(theta1 + theta2) - e1*cos(theta1)) - (X2 - e1)*(cos(theta1 + theta2) + e1*cos(theta1)) + X1*cos(theta1) - Y1*sin(theta1);
JA(5,4)= - sin(theta1 + theta2) - e1*sin(theta1);
JA(5,5)= - cos(theta1 + theta2) - e1*sin(theta1);
JA(5,6)= Y2*sin(theta1 + theta2) - cos(theta1 + theta2)*(X2 - e1);
JA(5,7)= 0;
JA(5,8)= 0;
JA(5,9)= 0;
JA(5,10)= 0;
JA(5,11)= 0;
JA(5,12)= 0;
JA(6,1)= 0;
JA(6,2)= 0;
JA(6,3)= Y3*(cos(theta1 + theta3) + r1*sin(theta1)) - Y2*(cos(theta1 + theta2) + e1*sin(theta1)) - (sin(theta1 + theta2) + e1*sin(theta1))*(X2 - e1 + r1) + (X3 - e2)*(sin(theta1 + theta3) + r1*sin(theta1));
JA(6,4)= cos(theta1 + theta2) + e1*cos(theta1);
JA(6,5)= e1*cos(theta1) - sin(theta1 + theta2);
JA(6,6)= Y3*e2*sin(theta2) - Y2*cos(theta1 + theta2) - sin(theta1 + theta2)*(X2 - e1 + r1) + e2*sin(theta2)*(X3 - e2);
JA(6,7)= - cos(theta1 + theta3) - e2*cos(theta2) - r1*cos(theta1);
JA(6,8)= sin(theta1 + theta3) - e2*cos(theta2) - r1*cos(theta1);
JA(6,9)= Y3*cos(theta1 + theta3) + sin(theta1 + theta3)*(X3 - e2);
JA(6,10)= 0;
JA(6,11)= 0;
JA(6,12)= 0;
JA(7,1)= 0;
JA(7,2)= 0;
JA(7,3)= Y3*(sin(theta1 + theta3) - r1*cos(theta1)) - Y2*(sin(theta1 + theta2) - e1*cos(theta1)) - (X3 - e2)*(cos(theta1 + theta3) + r1*cos(theta1)) + (cos(theta1 + theta2) + e1*cos(theta1))*(X2 - e1 + r1);
JA(7,4)= sin(theta1 + theta2) + e1*sin(theta1);
JA(7,5)= cos(theta1 + theta2) + e1*sin(theta1);
JA(7,6)= cos(theta1 + theta2)*(X2 - e1 + r1) - Y2*sin(theta1 + theta2) - e2*cos(theta2)*(X3 - e2) - Y3*e2*cos(theta2);
JA(7,7)= - sin(theta1 + theta3) - e2*sin(theta2) - r1*sin(theta1);
JA(7,8)= - cos(theta1 + theta3) - e2*sin(theta2) - r1*sin(theta1);
JA(7,9)= Y3*sin(theta1 + theta3) - cos(theta1 + theta3)*(X3 - e2);
JA(7,10)= 0;
JA(7,11)= 0;
JA(7,12)= 0;
JA(8,1)= 0;
JA(8,2)= 0;
JA(8,3)= Y4*(cos(theta1 + theta4) + r1*sin(theta1)) - Y3*(cos(theta1 + theta3) + r1*sin(theta1)) - (sin(theta1 + theta3) + r1*sin(theta1))*(X3 - e2 + r2) + X4*(sin(theta1 + theta4) + r1*sin(theta1));
JA(8,4)= 0;
JA(8,5)= 0;
JA(8,6)= -sin(theta2)*(X3*e2 + Y3*e2 - X4*r2 - Y4*r2 + e2*r2 - e2^2);
JA(8,7)= cos(theta1 + theta3) + e2*cos(theta2) + r1*cos(theta1);
JA(8,8)= e2*cos(theta2) - sin(theta1 + theta3) + r1*cos(theta1);
JA(8,9)= - sin(theta1 + theta3)*(X3 - e2 + r2) - Y3*cos(theta1 + theta3);
JA(8,10)= - cos(theta1 + theta4) - r1*cos(theta1) - r2*cos(theta2);
JA(8,11)= sin(theta1 + theta4) - r1*cos(theta1) - r2*cos(theta2);
JA(8,12)= Y4*cos(theta1 + theta4) + X4*sin(theta1 + theta4);
JA(9,1)= 0;
JA(9,2)= 0;
JA(9,3)= (cos(theta1 + theta3) + r1*cos(theta1))*(X3 - e2 + r2) - X4*(cos(theta1 + theta4) + r1*cos(theta1)) - Y3*(sin(theta1 + theta3) - r1*cos(theta1)) + Y4*(sin(theta1 + theta4) - r1*cos(theta1));
JA(9,4)= 0;
JA(9,5)= 0;
JA(9,6)= cos(theta2)*(X3*e2 + Y3*e2 - X4*r2 - Y4*r2 + e2*r2 - e2^2);
JA(9,7)= sin(theta1 + theta3) + e2*sin(theta2) + r1*sin(theta1);
JA(9,8)= cos(theta1 + theta3) + e2*sin(theta2) + r1*sin(theta1);
JA(9,9)= cos(theta1 + theta3)*(X3 - e2 + r2) - Y3*sin(theta1 + theta3);
JA(9,10)= - sin(theta1 + theta4) - r1*sin(theta1) - r2*sin(theta2);
JA(9,11)= - cos(theta1 + theta4) - r1*sin(theta1) - r2*sin(theta2);
JA(9,12)= Y4*sin(theta1 + theta4) - X4*cos(theta1 + theta4);
JA(10,1)= X4*r2*sin(theta1 - theta2) - e3*cos(theta4) - X4*sin(theta4) - Y4*cos(theta4) + Y4*r2*sin(theta1 - theta2) + e3*r2*sin(theta1 - theta2);
JA(10,2)= X4*r1 + Y4*r1 + e3*r1 + X4*cos(theta4) - Y4*sin(theta4) - e3*sin(theta4) + X4*r2*cos(theta1 - theta2) + Y4*r2*cos(theta1 - theta2) + e3*r2*cos(theta1 - theta2);
JA(10,3)= r2*(X1*cos(theta1 - theta2) - Y1*sin(theta1 - theta2))*(X4 + Y4 + e3);
JA(10,4)= 0;
JA(10,5)= 0;
JA(10,6)= -r2*(X1*cos(theta1 - theta2) - Y1*sin(theta1 - theta2))*(X4 + Y4 + e3);
JA(10,7)= 0;
JA(10,8)= 0;
JA(10,9)= 0;
JA(10,10)= Y1*r1 + Y1*cos(theta4) - X1*sin(theta4) + Y1*r2*cos(theta1 - theta2) + X1*r2*sin(theta1 - theta2);
JA(10,11)= Y1*r1 - X1*cos(theta4) - Y1*sin(theta4) + Y1*r2*cos(theta1 - theta2) + X1*r2*sin(theta1 - theta2);
JA(10,12)= X1*e3*sin(theta4) - X1*X4*cos(theta4) - Y1*Y4*cos(theta4) - Y1*e3*cos(theta4) + X1*Y4*sin(theta4) - X4*Y1*sin(theta4);
JA(11,1)= 0;
JA(11,2)= 0;
JA(11,3)= 1;
JA(11,4)= 0;
JA(11,5)= 0;
JA(11,6)= 0;
JA(11,7)= 0;
JA(11,8)= 0;
JA(11,9)= 0;
JA(11,10)= 0;
JA(11,11)= 0;
JA(11,12)= -1;
JA(12,1)= 0;
JA(12,2)= 0;
JA(12,3)= 0;
JA(12,4)= 0;
JA(12,5)= 0;
JA(12,6)= 1;
JA(12,7)= 0;
JA(12,8)= 0;
JA(12,9)= 0;
JA(12,10)= 0;
JA(12,11)= 0;
JA(12,12)= 0;